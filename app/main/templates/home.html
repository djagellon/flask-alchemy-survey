{% extends 'bootstrap/base.html' %}

{%- block styles %}
<!-- Bootstrap -->
{{super()}}
<link href="{{url_for("static", filename="styles.css")}}" rel="stylesheet">
{%- endblock styles %}

{% block title %}
    {% if title %}
      {{ title }} - VERA Strategic
    {% else %}
      Welcome to VERA Strategic
    {% endif %}
{% endblock %}

{% block body %}
  {% block navbar %}
    <nav class="navbar navbar-default">
      <div class="container">

        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://verastrategic.com/">VERA Strategic</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

          <ul class="nav navbar-nav">
            <li><a href="{{ url_for('main.index')}}">Dashboard</a></li>
          </ul> 

          <ul class="nav navbar-nav navbar-right">
            {% if current_user.is_admin %}
              <li>
                <a href="#" id="toggle_admin">
                  admin 
                  {% if current_user.admin_controls_on %}
                   <span class="text-success">on</span>
                   {% else %}
                   <span class="text-danger">off</span>
                  {% endif %}
                </a>
              </li>

            {% endif %}

            {% if current_user.is_anonymous %}
                <li><a href="{{ url_for('user.login')}}">Login</a></li>          
            {% else %}
              <li><a href="">Profile</a></li>
              <li><a href="{{ url_for('user.logout') }}">Logout</a></li>
            {% endif %}
          </ul>

        </div>

      </div>
    </nav>
  {% endblock %}

    <div id="main-div" class="container">
    {# One-time system messages called Flash messages #}
    {% block flash_messages %}
        {%- with messages = get_flashed_messages(with_categories=true) -%}
            {% if messages %}
                {% for category, message in messages %}
                    {% if category=='error' %}
                        {% set category='danger' %}
                    {% endif %}
                    <div class="alert alert-dismissible alert-{{category}}">
                      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                      {{ message|safe }}
                    </div>
                {% endfor %}
            {% endif %}
        {%- endwith %}
    {% endblock %}

    {% block main %}
        {% block content %}{% endblock %}
    {% endblock %}
    </div>

{% block scripts %}
  {{super()}}
{% endblock %}

{# *** Allow sub-templates to insert extra html to the bottom of the body *** #}

  {% block extra_js %}
      <script type="text/javascript" src={{url_for("static", filename="js/framework.js")}}></script>
  {% endblock %}
{% endblock %}
